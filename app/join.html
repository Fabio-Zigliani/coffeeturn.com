<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <script>navigator.serviceWorker.register("pwabuilder-sw.js")</script>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="manifest" href="/manifest.json">
</head>
<title>coffeeturn.com - so you know who's turn it is to pay for coffee.</title>

<body>
    <!-- <link rel="stylesheet" href="/css/milligram.css"> -->
    <link href="css/entireframework.min.css" rel="stylesheet">
    <link rel="manifest" href="manifest.json" />
    <nav class="nav" tabindex="-1" onclick="this.focus()">
        <div class="container">
            <a class="pagename current" href="https://coffeeturn.com/">CoffeeTurn.com</a>
            <a href="Index.html">Home</a>
            <a href="join.html">Join</a> 
            <a href="about.html">About</a>
        </div>
    </nav>
    <button class="btn-close btn btn-sm">Ã—</button>

    <header>
        <div class="container"><img alt="CoffeeTurn logo" src="/images/logo.png"><br>
            <h1>coffeeturn.com</h1>
            So you know who's turn it is to pay for coffee.
        </div>>
    </header><br>
    <!--  -->
    <div class="container">
        <h2>Join CoffeTurn.com</h2>
        <h3>
            Click below to send us an sms to Join
        </h3>
        You will receive an sms back and will be able to enter the code below to confirm
        <form action="/api/enrol" method="post" id="enrolform">
            <fieldset>
                <label for="nameField">Send me a Registration Code</label><br>
                <input type="text" placeholder="enter your mobile number like +64 21 999999" id="mobile" name="mobile"><br>
                <input class="btn btn-sm btn-a smooth" type="submit" value="Send">
            </fieldset>
        </form>
    </div>
    <br>
    <!-- <section>
        <a class="button button-outline" href="index.html">Home</a>
        <a class="button button-clear" href="about.html">About</a>
    </section> -->
    <script type="module">
        // Check that service workers are supported
        import 'https://cdn.jsdelivr.net/npm/@pwabuilder/pwaupdate';
        const el = document.createElement('pwa-update');
        document.body.appendChild(el);
    </script>
    <script>
        document.addEventListener("submit", function (event) {
            const form = event.target;
            var payload = {}
            var element = document.getElementById('mobile')
            payload[element.id] = element.value;
            document.getElementById('mobile');
            fetch(form.action, { method: form.method, headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(payload) })
                .then(function (response) {
                    if (response.ok) {
                        form.reset();
                    }
                })
                .catch(function (error) {
                    console.warn(error);
                });
            //redirect to Index to enter received code
            window.location.href = "http://coffeeturn.com/index.html";
        });
        function onSubmit(token) {
            document.getElementById("enrolform").submit();
        }
    </script>
</body>

</html>